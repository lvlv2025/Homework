# ğŸ“Œ API æ¥å£æ–‡æ¡£

## ç”¨æˆ·è®¤è¯æ¨¡å—

### 1. ç™»å½•  
**æ¥å£åœ°å€ï¼š** `/api/login`  
**è¯·æ±‚æ–¹æ³•ï¼š** `POST`  
**è¯·æ±‚å‚æ•°ï¼ˆJSONï¼‰ï¼š**
| å­—æ®µå       | ç±»å‹    | æ˜¯å¦å¿…å¡« | è¯´æ˜               |
| username    | string | å¿…å¡«  | ç”¨æˆ·å             |
| password    | string | å¿…å¡«| å¯†ç ï¼ˆæ˜æ–‡ï¼Œåç«¯æ ¡éªŒï¼‰|
| captcha     | string | å¿…å¡«| éªŒè¯ç               |
| remember    | bool   | éå¿…å¡« | æ˜¯å¦ä¿æŒç™»å½•ï¼ˆé»˜è®¤ falseï¼‰ |

**è¿”å›ç¤ºä¾‹ï¼š**
```json
// æˆåŠŸ
{
  "success": true,
  "message": "ç™»å½•æˆåŠŸ",
  "username": "test_user"
}

// å¤±è´¥
{
  "success": false,
  "message": "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"
}
```

---

### 2. æ³¨å†Œ  
**æ¥å£åœ°å€ï¼š** `/api/register`  
**è¯·æ±‚æ–¹æ³•ï¼š** `POST`  
**è¯·æ±‚å‚æ•°ï¼ˆJSONï¼‰ï¼š**
| å­—æ®µå       | ç±»å‹    | æ˜¯å¦å¿…å¡« | è¯´æ˜           |
| username    | string | å¿…å¡« | ç”¨æˆ·å         |
| password    | string | å¿…å¡« | å¯†ç            |
| email       | string | å¿…å¡«  | é‚®ç®±           |
| captcha     | string | å¿…å¡«  | éªŒè¯ç          |

**è¿”å›ç¤ºä¾‹ï¼š**
```json
// æˆåŠŸ
{
  "success": true,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "user_uuid": "12345678901"
}

// å¤±è´¥
{
  "success": false,
  "message": "éªŒè¯ç é”™è¯¯"
}
```

---

### 3. è·å–ç™»å½•éªŒè¯ç 
**æ¥å£åœ°å€ï¼š** `/api/login/captcha`
**è¯·æ±‚æ–¹æ³•ï¼š** `GET`
**è¿”å›ï¼š** éªŒè¯ç  PNG å›¾ç‰‡ï¼ˆ`image/png`ï¼‰

---

### 4. è·å–æ³¨å†ŒéªŒè¯ç 
**æ¥å£åœ°å€ï¼š** `/api/register/captcha`
**è¯·æ±‚æ–¹æ³•ï¼š** `GET`
**è¿”å›ï¼š** éªŒè¯ç  PNG å›¾ç‰‡ï¼ˆ`image/png`ï¼‰

---

### 5. é€€å‡ºç™»å½•  
**æ¥å£åœ°å€ï¼š** `/api/logout`
**è¯·æ±‚æ–¹æ³•ï¼š** `GET`
**è¿”å›ï¼š** æ¸…é™¤ sessionï¼Œè¿”å›ç™»å‡ºçš„ç”¨æˆ·çš„UUID
**è¿”å›ç¤ºä¾‹ï¼š**
```json
// æˆåŠŸ
{
  "success": true,
  "message": "ç™»å‡ºæˆåŠŸ",
  "user_uuid": "12345678901"
}

// å¤±è´¥
{
  "success": false,
  "message": "ç™»å‡ºå¤±è´¥"
}
```

---

## èŠå¤©æ¨¡å—

### 6. è·å– AI å›å¤  
**æ¥å£åœ°å€ï¼š** `/api/chat/get_response`  
**è¯·æ±‚æ–¹æ³•ï¼š** `POST`  
**éœ€è¦ç™»å½•ï¼š** å¿…éœ€  

**è¯·æ±‚å‚æ•°ï¼ˆJSONï¼‰ï¼š**
| å­—æ®µå    | ç±»å‹   | å¿…å¡« | è¯´æ˜                    |
| text     | string| å¿…å¡«   | ç”¨æˆ·å‘é€çš„æ¶ˆæ¯           |
| topic_id | string| ç¬¬ä¸€æ¬¡ä¸ç”¨   | ä¼šè¯ IDï¼ˆé¦–æ¬¡ä¸ä¼ åˆ™åç«¯ç”Ÿæˆï¼‰ |

**è¿”å›ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "reply": "è¿™æ˜¯AIçš„å›ç­”",
  "topic_id": "12345678"
}
```

---

### 7. å¼€å¯æ–°è¯é¢˜  
**æ¥å£åœ°å€ï¼š** `/api/chat/update_chat`  
**è¯·æ±‚æ–¹æ³•ï¼š** `POST`  
**éœ€è¦ç™»å½•ï¼š** å¿…éœ€  

**è¯·æ±‚å‚æ•°ï¼ˆJSONï¼‰ï¼š**
| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜         |
| new   | bool | å¿…å¡«   | æ˜¯å¦å¼€å¯æ–°è¯é¢˜ |

**è¿”å›ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "æ–°è¯é¢˜å·²å¼€å§‹",
  "topic_id": "98765432"
}
```

---

### 8. è·å–å†å²å¯¹è¯ + å›å¤  
**æ¥å£åœ°å€ï¼š** `/api/chat/history_response`  
**è¯·æ±‚æ–¹æ³•ï¼š** `POST`  
**éœ€è¦ç™»å½•ï¼š** å¿…éœ€  

**è¯·æ±‚å‚æ•°ï¼ˆJSONï¼‰ï¼š**
| å­—æ®µå | ç±»å‹   | å¿…å¡« | è¯´æ˜       |
| text  | string | å¿…å¡«   | ç”¨æˆ·è¾“å…¥æ¶ˆæ¯ |
| topic_id  | string | å¿…å¡«   | ç”¨æˆ·å†å²å¯¹è¯çš„è®°å½• |

**è¿”å›ç¤ºä¾‹ï¼š**
```json
{
  "reply": [
    {
      "role": "user",
      "content": "ä½ å¥½"
    },
    {
      "role": "assistant",
      "content": "ä½ å¥½ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ ï¼Ÿ"
    },
    {
      "role": "user",
      "content": "å¸®æˆ‘å†™ä¸€ä¸ªPythonå‡½æ•°"
    },
    {
      "role": "assistant",
      "content": "å¥½çš„ï¼Œè¯·é—®éœ€è¦å®ç°ä»€ä¹ˆåŠŸèƒ½ï¼Ÿ"
    }
  ]
}

```

---

## é”™è¯¯ç è¯´æ˜
| çŠ¶æ€ç  | å«ä¹‰ |
|--------|------|
| 200    | è¯·æ±‚æˆåŠŸ |
| 400    | è¯·æ±‚å‚æ•°é”™è¯¯ï¼ˆå¦‚éªŒè¯ç é”™è¯¯ï¼‰ |
| 401    | æœªç™»å½• / ç™»å½•å¤±è´¥ |
| 500    | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |
